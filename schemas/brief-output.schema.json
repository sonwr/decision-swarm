{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "DecisionSwarmBriefOutput",
  "type": "object",
  "required": [
    "question",
    "riskTolerance",
    "timeHorizon",
    "direction",
    "confidence",
    "constraintsCount",
    "constraintPenalty",
    "urgencyScore",
    "actionBias",
    "recommendationWindow",
    "advisorCount",
    "varianceScore",
    "riskMatrix",
    "riskLevelCounts",
    "overallRiskLevel",
    "riskSummary",
    "dissentMap"
  ],
  "properties": {
    "question": { "type": "string" },
    "riskTolerance": { "type": "string", "enum": ["low", "medium", "high"] },
    "timeHorizon": { "type": "string", "enum": ["24h", "7d", "30d"] },
    "direction": { "type": "string", "enum": ["conservative", "balanced", "aggressive"] },
    "confidence": { "type": "number" },
    "recommendation": { "type": "string" },
    "constraintsCount": { "type": "integer", "minimum": 0 },
    "constraintPenalty": { "type": "number", "minimum": 0 },
    "urgencyScore": { "type": "number", "minimum": 0, "maximum": 1 },
    "actionBias": { "type": "string", "enum": ["stabilize", "sequence", "act_now"] },
    "recommendationWindow": { "type": "string", "enum": ["next_24h", "this_week", "this_month"] },
    "advisorCount": { "type": "integer", "minimum": 0 },
    "varianceScore": { "type": "number", "minimum": 0 },
    "riskMatrix": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["vector", "level", "mitigation"],
        "properties": {
          "vector": { "type": "string" },
          "level": { "type": "string", "enum": ["low", "medium", "high"] },
          "mitigation": { "type": "string" }
        }
      }
    },
    "riskLevelCounts": {
      "type": "object",
      "required": ["low", "medium", "high"],
      "properties": {
        "low": { "type": "integer", "minimum": 0 },
        "medium": { "type": "integer", "minimum": 0 },
        "high": { "type": "integer", "minimum": 0 }
      },
      "additionalProperties": false
    },
    "overallRiskLevel": { "type": "string", "enum": ["low", "medium", "high"] },
    "riskSummary": { "type": "string" },
    "dissentMap": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["advisor", "stance", "confidence"],
        "properties": {
          "advisor": { "type": "string" },
          "stance": { "type": "string" },
          "confidence": { "type": "number" }
        }
      }
    },
    "markdown": { "type": "string" }
  },
  "additionalProperties": false
}
